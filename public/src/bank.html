<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>FlipKash</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="global.css" />
    <link rel="stylesheet" href="bank.css" />
    <link rel="icon" href="../images/kart.png" type="image/icon type" />
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:500&display=swap"
      rel="stylesheet"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script defer type="text/javascript" src="./script.js"></script>
    <script defer type="module" src="./logout.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
  <!-- <script>
    function updateConversionResult() {
      const inputElement = document.getElementById("nameInp");
      const flipkashResultSpan = document.getElementById("kash");
      const enteredAmount = parseFloat(inputElement.value) || 0;
      const equivalentFlipKash = enteredAmount * 0.365; 
      flipkashResultSpan.textContent = equivalentFlipKash;
    }
  </script> -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const inputElement = document.getElementById("nameInp");
      const flipkashResultSpan = document.getElementById("kash");
  
      inputElement.addEventListener("input", function () {
        const enteredAmount = parseFloat(inputElement.value) || 0;
        const equivalentFlipKash = (enteredAmount * 0.365).toFixed(5);
        const trimmedEquivalentFlipKash = Number(equivalentFlipKash);

        flipkashResultSpan.textContent = equivalentFlipKash;
      });
    });
  </script>
  <!-- <script>
    // document.getElementById("sub_btn").onclick(){
    //   const balanceSpan=document.getElementById("balance");
    //   const inputElement = document.getElementById("nameInp");
    //   console.log(balanceSpan,inputElement)
    //   document.getElementById("balance").textContent=balanceSpan - (0.365)*inputElement;
    // }
    // document.getElementById("sub_btn").addEventListener("click", deductUrl);
    document.getElementById("sub_btn").addEventListener("click", function() {
            const balanceSpan = document.getElementById("balance").textContent;
            const inputElement = document.getElementById("nameInp");
            
            // Convert input value to a number
            const inputValue = parseFloat(inputElement.value);
            
            // Check if the input is a valid number
            if (!isNaN(inputValue)) {
                const newBalance = parseFloat(balanceSpan.textContent) - (0.365) * inputValue;
                balanceSpan.textContent = newBalance.toFixed(2); // Display new balance with 2 decimal places
            } else {
                console.log("Invalid input");
            }
        });
  </script> -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
        const balanceSpan = document.getElementById("balance");
        const inputElement = document.getElementById("nameInp");
        const confirmButton = document.getElementById("sub_btn");
        console.log(balanceSpan,inputElement);

        confirmButton.addEventListener("click", function () {
            const inputValue = parseFloat(inputElement.value);
            
            // Check if the input value is a valid number
            if (!isNaN(inputValue)) {
                const currentBalance = parseFloat(balanceSpan.textContent);
                const deductionAmount = 0.365 * inputValue;
                const newBalance = currentBalance - deductionAmount;

                // Update the balance span with the new balance
                balanceSpan.textContent = newBalance.toFixed(2);
            } else {
                console.log("Invalid input value:", inputElement.value);
            }
        });
    });
</script>



  
  </head>
  <body>
    <div class="topnav">
      <a href="./subsidiaries.html">Account Details</a>
      <a class="active">Token Exchange</a>
      <a href="./rules.html">Rules and Regulations</a>
      <div class="topnav-right">
        <a id="logout" style="color: white;">Logout</a>
    </div>
    
    </div>
    <main>
      <div class="container">
        <div class="token-display">
          <h1 style="color:#323232">FlipKash Owned by You : <span id="balance">100</span>FK </h1>
          <img class="coin-image" src="../images/coins.png">
      </div>   
        <div class="main-flex">
          <h1 style="margin-top:2rem;color:black" >FlipKash Conversion</h1>
          <div class="conversion-data">
            <div class="left">
              <h2 style="color:black;margin-bottom: 2rem;">Select Your Subsidiary</h2>
              <div class="dropdown-center">
                <button style="background-color: #f9ec63;color:#057bd5;border:none;" class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Subsidiary
                </button>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">Myntra</a></li>
                  <li><a class="dropdown-item" href="#">ClearTrip</a></li>
                  <li><a class="dropdown-item" href="#">Jabong</a></li>
                </ul>
              </div>
              <div class="mb-5">
                <div class="mylabel" style="color:black;margin-top: 2rem;"> 
                  <label for="nameInp">How Many Loyalty Points Do You Want ? </label> 
                </div>
                <input
                  type="text"
                  placeholder="Enter Amount"
                  id="nameInp"
                  class="form-control mb-3 topper"
                />
      
                <button style="background-color: #f9ec63;
                border: none;"
                  type="text"
                  id="sub_btn"
                  class="btn w-100 btn-outline-primary mb-3"
                >
                  Confirm Transaction
                </button>
  
              </div>
            </div>
            <div class="right">
              <h2 style="color:black;margin-bottom: 2rem;">Conversion Results</h2>
                <h4>The equivalent amount of FlipKash for the given amount of tokens is: </h3>
              <div class="result" style="margin-top:2rem">
              <h4><span id="kash">0</span> FlipKash</h3>
              <img class="coins" src="../images/coins.png">
              </div>
          </div>
          </div>
        </div>
      </div>
    </main>
    
  </body>
  
</html>
